<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>The Rollbar alert lamp by sai-y</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">The Rollbar alert lamp</h1>
      <h2 class="project-tagline">A 3D printed lamp that changes its behavior upon receiving a rollbar alert</h2>
      <a href="https://github.com/sai-y/photon_desktop_lamp" class="btn">View on GitHub</a>
      <a href="https://github.com/sai-y/photon_desktop_lamp/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sai-y/photon_desktop_lamp/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="general-description-of-the-lamp" class="anchor" href="#general-description-of-the-lamp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>General Description of the lamp</h3>

<p>This 3D printed desktop lamp is enabled by a <a href="https://www.particle.io/">Particle Photon</a>. The Photon is a prototyping tool that comes with a Wi-Fi chipset. This enables interfacing sensors/actuators to the internet and monitor them remotely. This lamp is equipped with a 24 Pixel circular RGB LED strip called the <a href="https://www.adafruit.com/product/1586">Neopixel from Adafruit Industries </a>. </p>

<p>The Particle Photon can produce different color combinations on the RGB LED strip as shown in the picture below:  </p>

<p><img src="https://raw.githubusercontent.com/sai-y/photon_desktop_lamp/master/desktop_lamp.jpg" alt=""> </p>

<h2>
<a id="building-the-lamp" class="anchor" href="#building-the-lamp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Building the lamp</h2>

<p>The following are needed to build the lamp:  </p>

<ol>
<li>
<a href="https://store.particle.io/">Particle Photon</a><br>
</li>
<li>3D printed enclosure + lamp shade<br>
</li>
<li>Micro USB cable<br>
</li>
<li>
<a href="https://www.adafruit.com/products/2268">24 pixel Neopixel ring</a>. </li>
</ol>

<h2>
<a id="particle-photon---firmware--setup" class="anchor" href="#particle-photon---firmware--setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Particle Photon - Firmware + Setup</h2>

<p>The Particle Photon has to be setup to receive rollbar alerts. This includes adding the <a href="https://docs.particle.io/guide/getting-started/start/photon/">WiFi credentials</a> to the Photon. 
The firmware files for Particle Photon is available from <a href="https://github.com/sai-y/photon_desktop_lamp/tree/master/firmware">here</a>. This <a href="https://docs.particle.io/guide/getting-started/build/photon/">tutorial</a> explains compiling the code and flashing it on the Photon.  </p>

<p>The firmware consists of two major components:   </p>

<ol>
<li>Controlling the neopixel<br>
</li>
<li>Receiving incoming alerts from the web.<br>
</li>
</ol>

<h3>
<a id="controlling-the-neopixel" class="anchor" href="#controlling-the-neopixel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Controlling the neopixel:</h3>

<p>There are libraries from Adafruit to control the neopixel using the Particle Photon. This firmware used to build this lamp was based on one of the examples available with the library.  </p>

<h3>
<a id="receiving-incoming-alerts-from-the-web" class="anchor" href="#receiving-incoming-alerts-from-the-web" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Receiving incoming alerts from the web:</h3>

<p>The Particle Photon enables registering a function that could be executed when a rollbar alert is received. For e.g.: A function called <code>triggerAlert</code>can be registered as follows:  </p>

<p><code>bool success = Particle.function("trigger", triggerAlert);</code></p>

<p>When there are no rollbar alerts, the lamp glows white:  </p>

<p><img src="http://i.imgur.com/2F0I7H2.gif" alt=""></p>

<p>In order to trigger the Particle Photon for an alert, the device id and an access token is necessary. This information is available at <a href="https://docs.particle.io/guide/getting-started/intro/photon/">particle.io</a></p>

<p><img src="http://i.imgur.com/fc4jrqk.jpg" alt=""> <img src="http://i.imgur.com/xgCMGtR.jpg" alt=""></p>

<h2>
<a id="setting-up-rollbar-webhooks" class="anchor" href="#setting-up-rollbar-webhooks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting up Rollbar webhooks</h2>

<p>The alert could be sent to a Particle Photon using Rollbar's webhook notification option. 
<img src="http://i.imgur.com/fMsafqZ.jpg" alt=""></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sai-y/photon_desktop_lamp">The Rollbar alert lamp</a> is maintained by <a href="https://github.com/sai-y">sai-y</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
